# reserv_copy

# Домашнее задание к занятию «Резервное копирование баз данных»

# Задание 1. Резервное копирование
Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования.

Необходимо описать, какие варианты резервного копирования подходят в случаях:

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

# Ответ 1

1.1 Делать полный бэкап раз в неделю. Каждый день - инкрементный или дифференциальный бэкап.

1.2 Полный бэкап, но ,желательно, раз в день. Далее в течение дня инкрементный, т.к. по занимаемой памяти и времени он будет самый экономный.

# Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

# Ответ 2

Базовая команда pg_dump <имя_базы> > <файл_сохранения>.

Команда pg_restore извлекает архивный файл, созданный командой pg_dump, и восстанавливает выбранную базу данных PostgreSQL. Для указания базы данных нужно задать параметр -d - pg_restore <имя_базы> <файл_сохранения>.

# Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL.

# Ответ 3

Для данного вида резеревирования используется команда mysqlbackup с параметром --incremental-base=history:last_full_backup.

Также можно использовать и сторонние утилиты. Например, Percona XtraBackup, которая позволяет делать архивы баз данных на лету без блокировок таблиц. Например, xtrabackup --backup --target-dir=/backupdb/inc1 --incremental-basedir=/backupdb/full.
